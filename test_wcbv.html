<!DOCTYPE html>
<html>
    <head>
        <title>WordcloudJS</title>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        
        <link rel="stylesheet" href="libs/Colorpicker/css/colorpicker.css" />
        <link rel="stylesheet" href="assets/main.css" />
        <link rel="stylesheet" href="fonts/fonts.css" />
        <link rel="stylesheet" href="libs/Colorpicker/css/layout.css" />
    </head>
    <body>
        <header class="header">
            <a class="header__home" href="index.html">Zur√ºck</a>
            <h1 class="header__title">WordcloudJS</h1>
        </header>
        <div id="scene">
            <div id="canvasWrapper"></div>
        </div>
        <div id="page">
            <table id="toolbar">
                <tr>
                    <td>
                        <table id="tools">
                            <tr>
                                <td class="tools_title">Bounding-Volume MinSize</td>
                                <td class="tools_edit">
                                    <input type="range" min="2" max="32" value="8" id="input_minsize" />
                                </td>
                                <td class="tools_value" id="value_minsize">8 </td>
                            </tr>
                            <tr>
                                <td class="tools_title">Fill</td>
                                <td class="tools_edit">
                                    <input type="checkbox" id="input_fill" />
                                </td>
                                <td class="tools_value" id="value_fill"></td>
                            </tr>
                            <tr>
                                <td class="tools_title">Option</td>
                                <td class="tools_edit">
                                    <input type="range" min="0" max="2" value="0" id="input_option" />
                                </td>
                                <td class="tools_value" id="value_option">all</td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>
        <script src="node_modules/jquery/dist/jquery.min.js"></script>
        <script src="libs/Colorpicker/js/colorpicker.js"></script>
        <script src="src/wordcloud.js"></script>
        <script>
            $(document).ready(() => {
                wc = new WordcloudJS();
                $('#scene').css('background-color', '#ffffff');
                $('#canvasWrapper').css('margin-top', '100px');

                $('#input_minsize').mousemove(() => {
                    build();
                    $('#value_minsize').html($('#input_minsize').val());
                });

                $('#input_option').mousemove(() => {
                    build();
                    const selectedOption = parseInt($('#input_option').val());
                    $('#value_option').html(getOption(selectedOption));
                });

                $('#input_fill').change(() => {
                    build();
                });
                
                const build = () => {
                    $('#canvasWrapper canvas').remove();

                    const word = new wc.createWord({
                        text: 'WordCloud',
                        boundingVolumeMinSize: parseInt($('#input_minsize').val()),
                        style: {
                            fontSize: 200,
                            fontFamily: 'Arial'
                        }
                    });

                    const canvas = word.drawWordOnCanvas({
                        color: '#DD1166',
                        fill: $('#input_fill').prop('checked'),
                        drawOption: getOption(parseInt($('#input_option').val()))
                    });

                    $('#canvasWrapper').append(canvas);
                };

                const getOption = (selectedOption) => {
                    let defaultOption = 'all';
                    
                    if (selectedOption == 1) {
                        return 'empty'
                    } else if(selectedOption == 2) {
                        return 'filled';
                    }
                    return defaultOption;
                };
                
                build();
            });
        </script>
    </body>
</html>
